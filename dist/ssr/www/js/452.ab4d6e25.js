"use strict";(self["webpackChunkmbci"]=self["webpackChunkmbci"]||[]).push([[452],{36687:(e,a,s)=>{s.d(a,{Z:()=>t});s(24110),s(18964);const t={name:"LockScreen",data(){return{frm:!1,userId:"",password:"",isPwd:"password",rules:[e=>!!e||"Valor requerido"],loading:!1,localData:{}}},async asyncData({isDev:e,route:a,store:s,env:t,params:r,query:o,req:l,res:n,redirect:i,error:d,$axios:u}){let c={};if(localStorage.data&&(c=JSON.parse(localStorage.data)),c.logged&&void 0!=c.userId)return localStorage.userId=c.userId,void i("/")},beforeMount(){this.$q.dark.set(!1)},mounted(){localStorage.userId&&(this.userId=localStorage.userId)},methods:{onSubmit(){this.$refs.frm.validate().then((e=>{this.loading=!1,e&&this.login()}))},onReset(){},login(){this.loading=!0,this.$axios({method:"post",url:"/api/login",data:{userId:this.userId,password:this.password}}).then((e=>{500==e.data.result?this.$q.notify({color:"warning",message:"Usuario y/o Contraseña Inexistentes"}):200==e.data.result?(localStorage.userId=this.userId,this.userName=e.data.results[0].nombre,1==this.step?this.step=2:(this.$q.notify({color:"positive",message:`Bienvenid@ ${this.userId}...`}),localStorage.data=JSON.stringify({logged:!0,id:this.userId,id_usuario:e.data.results[0].id_usuario,userId:this.userId,nombre:e.data.results[0].nombre,email:e.data.results[0].email,perfil:e.data.results[0].perfil}),this.$router.replace("/"))):404==e.data.result?(e.data.msg,this.$q.notify({color:"warning",message:"Error de comunicación con la Base de Datos: "+e.data.msg.parent.sqlMessage})):this.$q.notify({color:"warning",message:"Se detectó un problema de comunicación con la Base de Datos"})})).catch((e=>{console.log("Error:",e),this.$q.notify({color:"warning",message:"Se detectó un inconveniente: "+e})})).finally((()=>{this.loading=!1}))}}}},3013:(e,a,s)=>{s.d(a,{s:()=>i});var t=s(59835),r=s(61957);const o=(0,t._)("img",{src:"logo.jpg",class:"q-mb-lg","spinner-color":"primary",style:{height:"100px","max-width":"300px"}},null,-1),l={class:"text-h5 text-center text-grey-15 q-mb-md"},n=(0,t.Uk)(" Acceso ");function i(e,a,s,i,d,u){const c=(0,t.up)("q-icon"),m=(0,t.up)("q-input"),p=(0,t.up)("q-card-section"),g=(0,t.up)("q-btn"),f=(0,t.up)("q-card-actions"),h=(0,t.up)("q-form"),w=(0,t.up)("q-card"),b=(0,t.up)("q-page"),y=(0,t.up)("q-page-container"),q=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(q,{class:"bg-image"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"flex flex-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{style:{"background-color":"rgba(255,255,255,0.9)"}},{default:(0,t.w5)((()=>[o,(0,t.Wm)(h,{modelValue:d.frm,"onUpdate:modelValue":a[3]||(a[3]=e=>d.frm=e),onSubmit:(0,r.iM)(u.onSubmit,["prevent","stop"]),onReset:(0,r.iM)(u.onReset,["prevent","stop"]),class:"q-gutter-md",name:"fmr",ref:"frm"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"q-mt-md"},{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t.Wm)(c,{name:"lock"}),n]),(0,t.Wm)(m,{modelValue:d.userId,"onUpdate:modelValue":a[0]||(a[0]=e=>d.userId=e),type:"text",label:"Usuario",rules:d.rules,autofocus:""},{before:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"person"})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(m,{modelValue:d.password,"onUpdate:modelValue":a[2]||(a[2]=e=>d.password=e),type:d.isPwd?"password":"text",label:"Contraseña",rules:d.rules},{before:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"vpn_key"})])),append:(0,t.w5)((()=>[(0,t.Wm)(c,{name:d.isPwd?"visibility_off":"visibility",class:"cursor-pointer text-primary",onClick:a[1]||(a[1]=e=>d.isPwd=!d.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"])])),_:1}),(0,t.Wm)(f,{align:"around"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{flat:"",label:"Recuperar contraseña","no-caps":"",color:"primary"}),(0,t.Wm)(g,{type:"submit",color:"primary",icon:"check",label:"Continuar","no-caps":"",loading:d.loading},null,8,["loading"])])),_:1})])),_:1},8,["modelValue","onSubmit","onReset"])])),_:1})])),_:1})])),_:1})])),_:1})}},24452:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var t=s(84391),r=s(84257),o=s(11639),l=s(35217),n=s(78999),i=s(30718),d=s(84498),u=s(61451),c=s(56597),m=s(79968),p=s(3898),g=s(89357),f=s(49480),h=s(69984),w=s.n(h);const b=(0,o.Z)(r.Z,[["render",t.s]]),y=b;w()(r.Z,"components",{QLayout:l.Z,QPageContainer:n.Z,QPage:i.Z,QCard:d.Z,QForm:u.Z,QCardSection:c.Z,QIcon:m.Z,QInput:p.Z,QCardActions:g.Z,QBtn:f.Z})},84257:(e,a,s)=>{s.d(a,{Z:()=>t.Z});var t=s(36687)},84391:(e,a,s)=>{s.d(a,{s:()=>t.s});var t=s(3013)}}]);