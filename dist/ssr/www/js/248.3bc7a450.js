"use strict";(self["webpackChunkmbci"]=self["webpackChunkmbci"]||[]).push([[248],{76217:(a,e,l)=>{l.d(e,{Z:()=>s});l(18964),l(24110);var t=l(61e3),o=l.n(t);const s={name:"MainLayout",data(){return{ruta:"Principal",show:!1,drawer:!1,miniState:!0,userId:"Usuario",usuario:"Usuario",localData:null,dialogPassword:!1,validForm:!1,loading:!1,password:{password:"",actual:"",nueva:"",confirma:""},rulesActual:[a=>o()(a)==this.password.password||"Contraseña incorrecta"],rules:[a=>!!a||"Campo obligatorio",a=>(a||"").length<=20||"Máximo 20 caractéres",a=>(a||"").length>=6||"Mínimo 6 caractéres"],rulesConfirma:[a=>!!a||"Campo obligatorio",a=>a===this.password.nueva||"Las contraseñas no coinciden"],dark:!1,sha:o()}},beforeMount(){void 0!=localStorage.data&&localStorage.data&&void 0!=localStorage.userId?(this.show=!0,this.localData=JSON.parse(localStorage.data),this.userId=this.localData.userId,this.usuario=this.localData.nombre,this.getPass()):this.$router.replace("/login")},created(){},mounted(){localStorage&&localStorage.tema&&(this.dark="true"==localStorage.tema),this.$q.dark.set(this.dark)},methods:{logout(){localStorage.removeItem("data"),localStorage.removeItem("dataAdmin"),this.$router.replace("/login")},async getPass(){let a=await this.$axios({url:`/api/pass/?userId=${localStorage.userId}`,method:"post"});this.password.password=await a.data.results.password},onSubmit(){this.loading=!0,this.$refs.frm.validate().then((a=>{console.log("then",a),a&&(this.$q.loading.show(),this.$axios({method:"post",url:"/api/update_pass",data:{usuario:this.localData.userId,pass:o()(this.password.nueva)}}).then((a=>{this.$q.notify({color:"positive",message:a.data.msg})})).catch((a=>{this.$q.notify({color:"warning",message:a})})).finally((()=>{this.loading=!1,this.dialogPassword=!1,this.$q.loading.hide(),this.password.actual="",this.password.nueva="",this.password.confirma="",this.getPass()})))}))},cambiaTema(){this.dark=!this.dark,this.$q.dark.set(this.dark),localStorage.tema=this.dark.toString()}}}},23241:(a,e,l)=>{l.d(e,{s:()=>S});var t=l(59835),o=l(86970),s=l(61957);const r=a=>((0,t.dD)("data-v-3fcaf2af"),a=a(),(0,t.Cn)(),a),u=(0,t.Uk)(" Abrir y Cerrar el Menú "),d=(0,t.Uk)(" My Best Car Insurance "),i=(0,t.Uk)("Cambio de contraseña, Tema y Cierre de Sesión"),n=(0,t.Uk)(" Cambiar contraseña "),c=(0,t.Uk)(" Cambiar de tema "),m=(0,t.Uk)(" Cerrar sesión "),w={class:"row justify-space-between q-mx-sm"},p=(0,t.Uk)(" Abrir y Cerrar el Menú "),f=(0,t.Uk)(" Página principal "),g=(0,t.Uk)("Pólizas"),h=(0,t.Uk)("Clientes"),_=(0,t.Uk)("Usuarios"),b=r((()=>(0,t._)("br",null,null,-1))),W=r((()=>(0,t._)("span",{class:"text-h6"},"Cambio de Contraseña",-1))),v={class:"row"},k={class:"col",cols:"12"},C={class:"row"},q={class:"col",cols:"12"},Z={class:"row"},y={class:"col",cols:"12"},Q=r((()=>(0,t._)("small",null,"*Campos requeridos",-1)));function S(a,e,l,r,S,U){const x=(0,t.up)("q-tooltip"),I=(0,t.up)("q-btn"),V=(0,t.up)("q-toolbar-title"),P=(0,t.up)("q-icon"),$=(0,t.up)("q-item-section"),j=(0,t.up)("q-item"),M=(0,t.up)("q-separator"),D=(0,t.up)("q-list"),L=(0,t.up)("q-menu"),A=(0,t.up)("q-bar"),F=(0,t.up)("q-header"),T=(0,t.up)("q-img"),z=(0,t.up)("q-space"),B=(0,t.up)("q-expansion-item"),H=(0,t.up)("q-scroll-area"),N=(0,t.up)("q-drawer"),R=(0,t.up)("q-footer"),E=(0,t.up)("router-view"),J=(0,t.up)("q-page-container"),O=(0,t.up)("q-card-section"),Y=(0,t.up)("q-input"),G=(0,t.up)("q-card-actions"),K=(0,t.up)("q-form"),X=(0,t.up)("q-card"),aa=(0,t.up)("q-dialog"),ea=(0,t.up)("q-layout"),la=(0,t.Q2)("ripple");return(0,t.wy)(((0,t.wg)(),(0,t.j4)(ea,{class:(0,o.C_)(S.dark?"fondoDark":"fondoLight"),view:"lHh Lpr lFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(A,{class:"barra",dark:""},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{flat:"",round:"",icon:"menu","aria-label":"Menu",onClick:e[0]||(e[0]=a=>S.drawer=!S.drawer)},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[u])),_:1})])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[d])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(a.$route.meta.title),1)])),_:1}),(0,t.Wm)(I,{flat:"",round:"",icon:"mdi-account","aria-label":"Usuario"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{anchor:"center left",self:"center right"},{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(L,{"transition-show":"jump-down","transition-hide":"jump-up","auto-close":""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{style:{"min-width":"150px"}},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(j,{clickable:"",onClick:e[1]||(e[1]=a=>S.dialogPassword=!0)},{default:(0,t.w5)((()=>[(0,t.Wm)($,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"mdi-form-textbox-password"})])),_:1}),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[n])),_:1})])),_:1})),[[la]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(j,{clickable:"",onClick:U.cambiaTema},{default:(0,t.w5)((()=>[(0,t.Wm)($,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"mdi-brightness-6"})])),_:1}),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[c])),_:1})])),_:1},8,["onClick"])),[[la]]),(0,t.Wm)(M),(0,t.wy)(((0,t.wg)(),(0,t.j4)(j,{clickable:"",onClick:e[2]||(e[2]=a=>U.logout())},{default:(0,t.w5)((()=>[(0,t.Wm)($,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"mdi-power"})])),_:1}),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[m])),_:1})])),_:1})),[[la]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(N,{modelValue:S.drawer,"onUpdate:modelValue":e[5]||(e[5]=a=>S.drawer=a),overlay:"",width:200,breakpoint:500,"content-class":"bg-grey-10 text-blue-grey-2"},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{class:"absolute-top drawer-image",src:"https://source.unsplash.com/800x600/?nature"}),(0,t.Wm)(H,{class:"fit"},{default:(0,t.w5)((()=>[(0,t._)("div",w,[(0,t.Wm)(I,{flat:"",round:"",icon:"menu","aria-label":"Menu",dense:"",onClick:e[3]||(e[3]=a=>S.drawer=!S.drawer)},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[p])),_:1})])),_:1}),(0,t.Wm)(z),(0,t.Wm)(I,{flat:"",round:"",icon:"home","aria-label":"Home",dense:"",to:"/",onClick:e[4]||(e[4]=a=>S.drawer=!S.drawer&&S.drawer)},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[f])),_:1})])),_:1})]),(0,t.Wm)(M,{dark:""}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(j,{clickable:"",to:"/polizas","active-class":"text-blue-3"},{default:(0,t.w5)((()=>[(0,t.Wm)($,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"description"})])),_:1}),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[g])),_:1})])),_:1})),[[la]])])),_:1}),(0,t.Wm)(B,{"content-inset-level":.5,"expand-separator":"",icon:"contact_page",label:"Catálogos"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{dense:""},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(j,{clickable:"",to:"/clientes","active-class":"text-blue-3"},{default:(0,t.w5)((()=>[(0,t.Wm)($,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"mdi-account-tie"})])),_:1}),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[h])),_:1})])),_:1})),[[la]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(j,{clickable:"",to:"/usuarios","active-class":"text-blue-3"},{default:(0,t.w5)((()=>[(0,t.Wm)($,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{name:"mdi-account-group"})])),_:1}),(0,t.Wm)($,null,{default:(0,t.w5)((()=>[_])),_:1})])),_:1})),[[la]])])),_:1})])),_:1},8,["content-inset-level"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(R,null,{default:(0,t.w5)((()=>[(0,t.Wm)(A,{class:"bg-primary justify-center",dark:""},{default:(0,t.w5)((()=>[(0,t._)("div",null," My Best Car Insurance © 2021 - "+(0,o.zw)((new Date).getFullYear()),1)])),_:1})])),_:1}),(0,t.Wm)(J,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((({Component:a})=>[(0,t.Wm)(s.uT,{name:"fade",mode:"out-in",duration:300},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(a)))])),_:2},1024)])),_:1})])),_:1}),(0,t.Wm)(aa,{modelValue:S.dialogPassword,"onUpdate:modelValue":e[11]||(e[11]=a=>S.dialogPassword=a),"max-width":"300px"},{default:(0,t.w5)((()=>[(0,t.Wm)(X,null,{default:(0,t.w5)((()=>[(0,t.Wm)(K,{ref:"frm",modelValue:S.validForm,"onUpdate:modelValue":e[10]||(e[10]=a=>S.validForm=a),onSubmit:(0,s.iM)(U.onSubmit,["prevent","stop"]),class:"q-gutter-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[b,W])),_:1}),(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t._)("div",k,[(0,t.Wm)(Y,{modelValue:S.password.actual,"onUpdate:modelValue":e[6]||(e[6]=a=>S.password.actual=a),label:"Contraseña actual*",type:"password",rules:S.rulesActual,color:"blue-6",autofocus:""},null,8,["modelValue","rules"])])]),(0,t._)("div",C,[(0,t._)("div",q,[(0,t.Wm)(Y,{modelValue:S.password.nueva,"onUpdate:modelValue":e[7]||(e[7]=a=>S.password.nueva=a),label:"Nueva contraseña*",type:"password",rules:S.rules,color:"blue-6"},null,8,["modelValue","rules"])])]),(0,t._)("div",Z,[(0,t._)("div",y,[(0,t.Wm)(Y,{modelValue:S.password.confirma,"onUpdate:modelValue":e[8]||(e[8]=a=>S.password.confirma=a),label:"Confirmar contraseña*",type:"password",rules:S.rulesConfirma,hint:S.password.nueva==S.password.confirma?"":"Las contraseñas no coinciden",color:"blue-6"},null,8,["modelValue","rules","hint"])])]),Q])),_:1}),(0,t.Wm)(G,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(M),(0,t.Wm)(I,{color:"default",label:"Regresar",flat:"",onClick:e[9]||(e[9]=a=>S.dialogPassword=!1)}),(0,t.Wm)(I,{type:"submit",color:"blue-6",label:"Actualizar",flat:"",loading:S.loading,disabled:S.sha(S.password.actual)!==S.password.password||0==S.password.nueva.length||S.password.nueva!=S.password.confirma,onClick:U.onSubmit},null,8,["loading","disabled","onClick"])])),_:1})])),_:1},8,["modelValue","onSubmit"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["class"])),[[s.F8,S.show]])}},22248:(a,e,l)=>{l.r(e),l.d(e,{default:()=>j});var t=l(83320),o=l(35786),s=l(11639),r=l(35217),u=l(62959),d=l(72586),i=l(49480),n=l(99675),c=l(19298),m=l(75045),w=l(39306),p=l(17911),f=l(91920),g=l(79968),h=l(94935),_=l(51312),b=l(85613),W=l(26600),v=l(7358),k=l(50735),C=l(20993),q=l(78999),Z=l(80447),y=l(84498),Q=l(61451),S=l(56597),U=l(3898),x=l(89357),I=l(42166),V=l(69984),P=l.n(V);const $=(0,s.Z)(o.Z,[["render",t.s],["__scopeId","data-v-3fcaf2af"]]),j=$;P()(o.Z,"components",{QLayout:r.Z,QHeader:u.Z,QBar:d.Z,QBtn:i.Z,QTooltip:n.Z,QToolbarTitle:c.Z,QMenu:m.Z,QList:w.Z,QItem:p.Z,QItemSection:f.Z,QIcon:g.Z,QSeparator:h.Z,QDrawer:_.Z,QImg:b.Z,QScrollArea:W.Z,QSpace:v.Z,QExpansionItem:k.Z,QFooter:C.Z,QPageContainer:q.Z,QDialog:Z.Z,QCard:y.Z,QForm:Q.Z,QCardSection:S.Z,QInput:U.Z,QCardActions:x.Z}),P()(o.Z,"directives",{Ripple:I.Z})},35786:(a,e,l)=>{l.d(e,{Z:()=>t.Z});var t=l(76217)},83320:(a,e,l)=>{l.d(e,{s:()=>t.s});var t=l(23241)}}]);